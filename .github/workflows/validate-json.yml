name: ğŸ§© Validate JSON Files

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
  workflow_dispatch:

jobs:
  validate:
    runs-on: ubuntu-latest
    name: Validate hacs.json and manifest.json

    steps:
      - name: ğŸ§© Checkout repository
        uses: actions/checkout@v4

      - name: ğŸ§° Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: 3.x

      - name: ğŸ” Validate JSON files
        run: |
          echo "Sprawdzam poprawnoÅ›Ä‡ plikÃ³w JSON..."
          python -m json.tool hacs.json > /dev/null
          python -m json.tool custom_components/matches_90minut/manifest.json > /dev/null
          for f in custom_components/matches_90minut/translations/*.json; do
            python -m json.tool "$f" > /dev/null
          done
          echo "âœ… Wszystkie pliki JSON sÄ… poprawne!"

      - name: âš ï¸ JeÅ›li ktÃ³ryÅ› JSON jest bÅ‚Ä™dny
        if: failure()
        run: |
          echo "âŒ BÅ‚Ä…d skÅ‚adni w jednym z plikÃ³w JSON!"
          exit 1
